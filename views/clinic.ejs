<%- include('./partials/head') %>
<div class="container">
  <div class="col-md-12">
    <div class="h-100 p-5 text-dark border bg-light rounded-3">
      <h2><%- place.name %></h2>
      <p></p>
      <a id="openInGoogle" target="_blank" href="https://www.google.com/maps/place/17%C2%B014'21.6%22N+88%C2%B046'13.7%22W" class="btn btn-outline-dark">Find In Google Maps</a>
      <button class="btn btn-outline-dark" type="button">Leave a Message</button>
    </div>
  </div>
  <div class="col-md-12">
  	<table width="100%" style="text-align: center;">
		<thead>
			<tr>
				<td>Times</td>
				<td>Monday</td>
				<td>Tuesday</td>
				<td>Wednesday</td>
				<td>Thursday</td>
				<td>Friday</td>
			</tr>
		</thead>
		<tbody>
			<% for (var i = 0; i <= times.length - 1; i++) { %>
				<tr>
					<td> <%- (i > 4) ? (i -4) : (i + 8) %> </td> 
					<% for( var k = 0; k <= times[k].length; k ++) { %>
						<td style="background: rgba(106,220,153, <%- (times[i][k]/40) %>);">  </td>
					<% } %>
				</tr>
			<% } %>
		</tbody>
	</table>
  </div>
</div>
<br>
<div class="container">
  <div class="row">
    Contact Information
      <!-- Grid row -->
      <div class="row">
        <ul>
          <li><%-place.name%></li>
          <li><a href="/schedule/<%-place._id%>">cataclism</a></li>
        </ul>
      </div>
    </div>
    <div class="row">
      <div class="col-12"><div id="mapid" style="width: 100%; height: 400px" class="border rounded border-info"></div></div>
    </div>
  </div>
</div>
  <script type="text/javascript">
  
  document.getElementById("openInGoogle").setAttribute("href","https://www.google.com/maps?q=".concat(<%-place.latlng.lat%>,",",<%-place.latlng.lng%>));
    // LEAFLET
    var mymap = L.map('mapid').setView([<%- place.latlng.lat %>, <%- place.latlng.lng %>], 14);

    var OpenStreetMap_DE = L.tileLayer('https://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png', {
      maxZoom: 18,
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    });

    OpenStreetMap_DE.addTo(mymap)

    let marker;
    marker = L.marker([ <%- place.latlng.lat %>, <%- place.latlng.lng %>]).addTo(mymap)
  </script>

<%- place %>
<%- include('./partials/footer') %>